{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/web3/smart-contracts/",
    "result": {"data":{"site":{"siteMetadata":{"title":"HelloCode"}},"markdownRemark":{"id":"b55c4af8-b014-59a4-a655-a2145a1258a7","excerpt":"什么是智能合约 智能合约是部署在以太坊某个地址上运行的程序，它由数据和函数组成，可以在收到交易时执行。 pragma 是编译器指令，用来声明编译器版本的。  声明一个名叫 storedData 的无符号整型的状态变量，定义的 set 和 get 函数是用来读写变量 storedData…","html":"<h2>什么是智能合约</h2>\n<p>智能合约是部署在以太坊某个地址上运行的程序，它由数据和函数组成，可以在收到交易时执行。</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token comment\">// SPDX-License-Identifier: GPL-3.0</span>\n<span class=\"token keyword\">pragma</span> <span class=\"token keyword\">solidity</span> <span class=\"token operator\">>=</span><span class=\"token version number\">0.4.16</span> <span class=\"token operator\">&lt;</span><span class=\"token version number\">0.9.0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">contract</span> <span class=\"token class-name\">SimpleStorage</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">uint</span> storedData<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span> x<span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token punctuation\">{</span>\n        storedData <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">view</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">uint</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> storedData<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>pragma 是编译器指令，用来声明编译器版本的。</p>\n<p><code class=\"language-text\">uint storedData</code> 声明一个名叫 storedData 的<strong>无符号整型</strong>的<strong>状态变量</strong>，定义的 set 和 get 函数是用来读写变量 storedData。</p>\n<h3>数据</h3>\n<p>数据存在两个位置：要么是存储，要么是内存。</p>\n<ol>\n<li>Storage</li>\n</ol>\n<p>状态变量用来表示持久性的数据，这些值会被存储到区块链上。</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">contract</span> <span class=\"token class-name\">SimpleStorage</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">uint</span> storedData<span class=\"token punctuation\">;</span> <span class=\"token comment\">// State variable</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>常见的类型包括：address，bool，整数，定点数，固定大小的字节数组，动态大小的字节数组，有理数和整数常量，字符常量，十六进制常量，枚举</p>\n<ol start=\"2\">\n<li>内存变量</li>\n</ol>\n<p>内存变量用来声明仅在合约函数执行阶段存在的值，这些变量不会永久存储在区块链上。</p>\n<ol start=\"3\">\n<li>环境变量</li>\n</ol>\n<p>除了在自己合约上定义的变量之外，还有一些特殊的全局变量。 它们主要用于提供有关区块链或当前交易的信息。如：</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>类型</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>block.timestamp</td>\n<td>uint256</td>\n<td>当前区块的时间戳</td>\n</tr>\n<tr>\n<td>msg.sender</td>\n<td>地址</td>\n<td>消息的发送者（当前调用）</td>\n</tr>\n</tbody>\n</table>\n<h3>函数</h3>\n<p>函数定义包含：</p>\n<ul>\n<li>参数变量和类型</li>\n<li>internal/external 声明</li>\n<li>pure/view/payable 声明</li>\n<li>返回类型</li>\n</ul>\n<ol>\n<li>调用方式</li>\n</ol>\n<ul>\n<li>internal：Internal 函数或者状态变量只能在内部访问</li>\n<li>external：External 函数是合约接口的一部分，可以被其他合约或者交易调用</li>\n</ul>\n<ol start=\"2\">\n<li>常见的函数类型</li>\n</ol>\n<ul>\n<li>\n<p>view 函数：view 函数不会修改合约数据</p>\n</li>\n<li>\n<p>constructor 函数：constructor 函数只会在合约部署的时候执行一次</p>\n</li>\n<li>\n<p>内建函数：比如：address.send()，可以将 ETH 发送给另一个账户</p>\n</li>\n</ul>\n<h3>事件日志</h3>\n<p>可以通过订阅事件来完成前后端与合约的通信</p>\n<div class=\"gatsby-highlight\" data-language=\"solidity\"><pre class=\"language-solidity\"><code class=\"language-solidity\"><span class=\"token keyword\">event</span> <span class=\"token function\">Transfer</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">address</span> <span class=\"token keyword\">from</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">address</span> to<span class=\"token punctuation\">,</span> <span class=\"token builtin\">uint</span> amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">emit</span> <span class=\"token function\">Transfer</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">,</span> receiver<span class=\"token punctuation\">,</span> amount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>开发框架</h3>\n<ul>\n<li>hardhat：是基于 node 生态的以太网开发环境，对 js 开发者相对友好</li>\n</ul>","frontmatter":{"title":"Smart Contract Develop","date":"December 14, 2024","description":null}},"previous":{"fields":{"slug":"/stock/candlestick-chart/"},"frontmatter":{"title":"K 线基础"}},"next":{"fields":{"slug":"/AI/what-is-machine-learning/"},"frontmatter":{"title":""}}},"pageContext":{"id":"b55c4af8-b014-59a4-a655-a2145a1258a7","previousPostId":"2866f951-4140-5c76-9e6a-91339d3f7948","nextPostId":"4feed20c-e922-56c9-b53a-f62380b211a8"}},
    "staticQueryHashes": ["2841359383","3257411868"]}